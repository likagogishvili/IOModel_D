{"ast":null,"code":"import { __extends } from \"tslib\";\nimport { RoundedRectangle } from \"../render/RoundedRectangle\";\nimport { Container } from \"./Container\";\nimport * as $type from \"../util/Type\";\nimport { Graphics } from \"./Graphics\";\nimport { Button } from \"./Button\";\nimport * as $utils from \"../util/Utils\";\n/**\r\n * A control that allows zooming chart's axes, or other uses requiring range\r\n * selection.\r\n *\r\n * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/scrollbars/} for more info\r\n */\n\nvar Scrollbar =\n/** @class */\nfunction (_super) {\n  __extends(Scrollbar, _super);\n\n  function Scrollbar() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    /**\r\n     * A thumb elment - a draggable square between the grips, used for panning\r\n     * the selection.\r\n     */\n\n\n    Object.defineProperty(_this, \"thumb\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: _this._makeThumb()\n    });\n    /**\r\n     * Start grip button.\r\n     */\n\n    Object.defineProperty(_this, \"startGrip\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: _this._makeButton()\n    });\n    /**\r\n     * End grip button.\r\n     */\n\n    Object.defineProperty(_this, \"endGrip\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: _this._makeButton()\n    });\n    Object.defineProperty(_this, \"_thumbBusy\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: false\n    });\n    Object.defineProperty(_this, \"_startDown\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: false\n    });\n    Object.defineProperty(_this, \"_endDown\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: false\n    });\n    Object.defineProperty(_this, \"_thumbDown\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: false\n    });\n    Object.defineProperty(_this, \"_gripDown\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: void 0\n    });\n    return _this;\n  }\n\n  Object.defineProperty(Scrollbar.prototype, \"_addOrientationClass\", {\n    enumerable: false,\n    configurable: true,\n    writable: true,\n    value: function () {\n      this._settings.themeTags = $utils.mergeTags(this._settings.themeTags, [\"scrollbar\", this._settings.orientation]);\n\n      if (!this._settings.background) {\n        this._settings.background = RoundedRectangle.new(this._root, {\n          themeTags: $utils.mergeTags(this._settings.themeTags, [\"main\", \"background\"])\n        });\n      }\n    }\n  });\n  Object.defineProperty(Scrollbar.prototype, \"_makeButton\", {\n    enumerable: false,\n    configurable: true,\n    writable: true,\n    value: function () {\n      return this.children.push(Button.new(this._root, {\n        themeTags: [\"resize\", \"button\", this.get(\"orientation\")],\n        icon: Graphics.new(this._root, {\n          themeTags: [\"icon\"]\n        })\n      }));\n    }\n  });\n  Object.defineProperty(Scrollbar.prototype, \"_makeThumb\", {\n    enumerable: false,\n    configurable: true,\n    writable: true,\n    value: function () {\n      return this.children.push(RoundedRectangle.new(this._root, {\n        themeTags: [\"thumb\", this.get(\"orientation\")]\n      }));\n    }\n  });\n  Object.defineProperty(Scrollbar.prototype, \"_handleAnimation\", {\n    enumerable: false,\n    configurable: true,\n    writable: true,\n    value: function (animation) {\n      var _this = this;\n\n      if (animation) {\n        this._disposers.push(animation.events.on(\"stopped\", function () {\n          _this.setPrivateRaw(\"isBusy\", false);\n\n          _this._thumbBusy = false;\n        }));\n      }\n    }\n  });\n  Object.defineProperty(Scrollbar.prototype, \"_afterNew\", {\n    enumerable: false,\n    configurable: true,\n    writable: true,\n    value: function () {\n      var _this = this;\n\n      this._addOrientationClass();\n\n      _super.prototype._afterNew.call(this);\n\n      var startGrip = this.startGrip;\n      var endGrip = this.endGrip;\n      var thumb = this.thumb;\n      var background = this.get(\"background\");\n\n      if (background) {\n        this._disposers.push(background.events.on(\"click\", function (event) {\n          _this.setPrivateRaw(\"isBusy\", true);\n\n          var point = _this._display.toLocal(event.point);\n\n          var w = _this.width();\n\n          var h = _this.height();\n\n          var orientation = _this.get(\"orientation\");\n\n          var newMiddle;\n\n          if (orientation == \"vertical\") {\n            newMiddle = (point.y - thumb.height() / 2) / h;\n          } else {\n            newMiddle = (point.x - thumb.width() / 2) / w;\n          }\n\n          var newCoordinate;\n          var key;\n\n          if (orientation == \"vertical\") {\n            newCoordinate = newMiddle * h;\n            key = \"y\";\n          } else {\n            newCoordinate = newMiddle * w;\n            key = \"x\";\n          }\n\n          var duration = _this.get(\"animationDuration\", 0);\n\n          if (duration > 0) {\n            _this._thumbBusy = true;\n\n            _this._handleAnimation(_this.thumb.animate({\n              key: key,\n              to: newCoordinate,\n              duration: duration,\n              easing: _this.get(\"animationEasing\")\n            }));\n          } else {\n            _this.thumb.set(key, newCoordinate);\n\n            _this._root.events.on(\"frameended\", function () {\n              _this.setPrivateRaw(\"isBusy\", false);\n            });\n          }\n        }));\n      }\n\n      this._disposers.push(thumb.events.on(\"dblclick\", function () {\n        var duration = _this.get(\"animationDuration\", 0);\n\n        var easing = _this.get(\"animationEasing\");\n\n        _this.animate({\n          key: \"start\",\n          to: 0,\n          duration: duration,\n          easing: easing\n        });\n\n        _this.animate({\n          key: \"end\",\n          to: 1,\n          duration: duration,\n          easing: easing\n        });\n      }));\n\n      this._disposers.push(startGrip.events.on(\"pointerdown\", function () {\n        _this.setPrivateRaw(\"isBusy\", true);\n\n        _this._startDown = true;\n        _this._gripDown = \"start\";\n      }));\n\n      this._disposers.push(endGrip.events.on(\"pointerdown\", function () {\n        _this.setPrivateRaw(\"isBusy\", true);\n\n        _this._endDown = true;\n        _this._gripDown = \"end\";\n      }));\n\n      this._disposers.push(thumb.events.on(\"pointerdown\", function () {\n        _this.setPrivateRaw(\"isBusy\", true);\n\n        _this._thumbDown = true;\n        _this._gripDown = undefined;\n      }));\n\n      this._disposers.push(startGrip.events.on(\"globalpointerup\", function () {\n        if (_this._startDown) {\n          _this.setPrivateRaw(\"isBusy\", false);\n        }\n\n        _this._startDown = false;\n      }));\n\n      this._disposers.push(endGrip.events.on(\"globalpointerup\", function () {\n        if (_this._endDown) {\n          _this.setPrivateRaw(\"isBusy\", false);\n        }\n\n        _this._endDown = false;\n      }));\n\n      this._disposers.push(thumb.events.on(\"globalpointerup\", function () {\n        if (_this._thumbDown) {\n          _this.setPrivateRaw(\"isBusy\", false);\n        }\n\n        _this._thumbDown = false;\n      }));\n\n      this._disposers.push(startGrip.on(\"x\", function () {\n        _this._updateThumb();\n      }));\n\n      this._disposers.push(endGrip.on(\"x\", function () {\n        _this._updateThumb();\n      }));\n\n      this._disposers.push(startGrip.on(\"y\", function () {\n        _this._updateThumb();\n      }));\n\n      this._disposers.push(endGrip.on(\"y\", function () {\n        _this._updateThumb();\n      }));\n\n      this._disposers.push(thumb.events.on(\"positionchanged\", function () {\n        _this._updateGripsByThumb();\n      }));\n\n      if (this.get(\"orientation\") == \"vertical\") {\n        startGrip.set(\"x\", 0);\n        endGrip.set(\"x\", 0);\n\n        this._disposers.push(thumb.adapters.add(\"y\", function (value) {\n          return Math.max(Math.min(Number(value), _this.height() - thumb.height()), 0);\n        }));\n\n        this._disposers.push(thumb.adapters.add(\"x\", function (_value) {\n          return _this.width() / 2;\n        }));\n\n        this._disposers.push(startGrip.adapters.add(\"x\", function (_value) {\n          return _this.width() / 2;\n        }));\n\n        this._disposers.push(endGrip.adapters.add(\"x\", function (_value) {\n          return _this.width() / 2;\n        }));\n\n        this._disposers.push(startGrip.adapters.add(\"y\", function (value) {\n          return Math.max(Math.min(Number(value), _this.height()), 0);\n        }));\n\n        this._disposers.push(endGrip.adapters.add(\"y\", function (value) {\n          return Math.max(Math.min(Number(value), _this.height()), 0);\n        }));\n      } else {\n        startGrip.set(\"y\", 0);\n        endGrip.set(\"y\", 0);\n\n        this._disposers.push(thumb.adapters.add(\"x\", function (value) {\n          return Math.max(Math.min(Number(value), _this.width() - thumb.width()), 0);\n        }));\n\n        this._disposers.push(thumb.adapters.add(\"y\", function (_value) {\n          return _this.height() / 2;\n        }));\n\n        this._disposers.push(startGrip.adapters.add(\"y\", function (_value) {\n          return _this.height() / 2;\n        }));\n\n        this._disposers.push(endGrip.adapters.add(\"y\", function (_value) {\n          return _this.height() / 2;\n        }));\n\n        this._disposers.push(startGrip.adapters.add(\"x\", function (value) {\n          return Math.max(Math.min(Number(value), _this.width()), 0);\n        }));\n\n        this._disposers.push(endGrip.adapters.add(\"x\", function (value) {\n          return Math.max(Math.min(Number(value), _this.width()), 0);\n        }));\n      }\n    }\n  });\n  Object.defineProperty(Scrollbar.prototype, \"_updateChildren\", {\n    enumerable: false,\n    configurable: true,\n    writable: true,\n    value: function () {\n      _super.prototype._updateChildren.call(this);\n\n      if (this.isDirty(\"end\") || this.isDirty(\"start\") || this._sizeDirty) {\n        this.updateGrips();\n      }\n    }\n  });\n  Object.defineProperty(Scrollbar.prototype, \"_changed\", {\n    enumerable: false,\n    configurable: true,\n    writable: true,\n    value: function () {\n      _super.prototype._changed.call(this);\n\n      if (this.isDirty(\"start\") || this.isDirty(\"end\")) {\n        var eventType = \"rangechanged\";\n\n        if (this.events.isEnabled(eventType)) {\n          this.events.dispatch(eventType, {\n            type: eventType,\n            target: this,\n            start: this.get(\"start\", 0),\n            end: this.get(\"end\", 1),\n            grip: this._gripDown\n          });\n        }\n      }\n    }\n  });\n  /**\r\n   * @ignore\r\n   */\n\n  Object.defineProperty(Scrollbar.prototype, \"updateGrips\", {\n    enumerable: false,\n    configurable: true,\n    writable: true,\n    value: function () {\n      var startGrip = this.startGrip;\n      var endGrip = this.endGrip;\n      var orientation = this.get(\"orientation\");\n      var height = this.height();\n      var width = this.width();\n\n      if (orientation == \"vertical\") {\n        startGrip.set(\"y\", height * this.get(\"start\", 0));\n        endGrip.set(\"y\", height * this.get(\"end\", 1));\n      } else {\n        startGrip.set(\"x\", width * this.get(\"start\", 0));\n        endGrip.set(\"x\", width * this.get(\"end\", 1));\n      }\n\n      var valueFunction = this.getPrivate(\"positionTextFunction\");\n      var from = Math.round(this.get(\"start\", 0) * 100);\n      var to = Math.round(this.get(\"end\", 0) * 100);\n      var fromValue;\n      var toValue;\n\n      if (valueFunction) {\n        fromValue = valueFunction.call(this, this.get(\"start\", 0));\n        toValue = valueFunction.call(this, this.get(\"end\", 0));\n      } else {\n        fromValue = from + \"%\";\n        toValue = to + \"%\";\n      }\n\n      startGrip.set(\"ariaLabel\", this._t(\"From %1\", undefined, fromValue));\n      startGrip.set(\"ariaValueNow\", \"\" + from);\n      startGrip.set(\"ariaValueText\", from + \"%\");\n      startGrip.set(\"ariaValueMin\", \"0\");\n      startGrip.set(\"ariaValueMax\", \"100\");\n      endGrip.set(\"ariaLabel\", this._t(\"To %1\", undefined, toValue));\n      endGrip.set(\"ariaValueNow\", \"\" + to);\n      endGrip.set(\"ariaValueText\", to + \"%\");\n      endGrip.set(\"ariaValueMin\", \"0\");\n      endGrip.set(\"ariaValueMax\", \"100\");\n    }\n  });\n  Object.defineProperty(Scrollbar.prototype, \"_updateThumb\", {\n    enumerable: false,\n    configurable: true,\n    writable: true,\n    value: function () {\n      var thumb = this.thumb;\n      var startGrip = this.startGrip;\n      var endGrip = this.endGrip;\n      var height = this.height();\n      var width = this.width();\n      var x0 = startGrip.x();\n      var x1 = endGrip.x();\n      var y0 = startGrip.y();\n      var y1 = endGrip.y();\n      var start = 0;\n      var end = 1;\n\n      if (this.get(\"orientation\") == \"vertical\") {\n        if ($type.isNumber(y0) && $type.isNumber(y1)) {\n          if (!this._thumbBusy && !thumb.isDragging()) {\n            thumb.set(\"height\", y1 - y0);\n            thumb.set(\"y\", y0);\n          }\n\n          start = y0 / height;\n          end = y1 / height;\n        }\n      } else {\n        if ($type.isNumber(x0) && $type.isNumber(x1)) {\n          if (!this._thumbBusy && !thumb.isDragging()) {\n            thumb.set(\"width\", x1 - x0);\n            thumb.set(\"x\", x0);\n          }\n\n          start = x0 / width;\n          end = x1 / width;\n        }\n      }\n\n      if (this.getPrivate(\"isBusy\") && (this.get(\"start\") != start || this.get(\"end\") != end)) {\n        this.set(\"start\", start);\n        this.set(\"end\", end);\n      }\n\n      var valueFunction = this.getPrivate(\"positionTextFunction\");\n      var from = Math.round(this.get(\"start\", 0) * 100);\n      var to = Math.round(this.get(\"end\", 0) * 100);\n      var fromValue;\n      var toValue;\n\n      if (valueFunction) {\n        fromValue = valueFunction.call(this, this.get(\"start\", 0));\n        toValue = valueFunction.call(this, this.get(\"end\", 0));\n      } else {\n        fromValue = from + \"%\";\n        toValue = to + \"%\";\n      }\n\n      thumb.set(\"ariaLabel\", this._t(\"From %1 to %2\", undefined, fromValue, toValue));\n      thumb.set(\"ariaValueNow\", \"\" + from);\n      thumb.set(\"ariaValueText\", from + \"%\");\n    }\n  });\n  Object.defineProperty(Scrollbar.prototype, \"_updateGripsByThumb\", {\n    enumerable: false,\n    configurable: true,\n    writable: true,\n    value: function () {\n      var thumb = this.thumb;\n      var startGrip = this.startGrip;\n      var endGrip = this.endGrip;\n\n      if (this.get(\"orientation\") == \"vertical\") {\n        var thumbSize = thumb.height();\n        startGrip.set(\"y\", thumb.y());\n        endGrip.set(\"y\", thumb.y() + thumbSize);\n      } else {\n        var thumbSize = thumb.width();\n        startGrip.set(\"x\", thumb.x());\n        endGrip.set(\"x\", thumb.x() + thumbSize);\n      }\n    }\n  });\n  Object.defineProperty(Scrollbar, \"className\", {\n    enumerable: true,\n    configurable: true,\n    writable: true,\n    value: \"Scrollbar\"\n  });\n  Object.defineProperty(Scrollbar, \"classNames\", {\n    enumerable: true,\n    configurable: true,\n    writable: true,\n    value: Container.classNames.concat([Scrollbar.className])\n  });\n  return Scrollbar;\n}(Container);\n\nexport { Scrollbar };","map":{"version":3,"mappings":"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","names":["RoundedRectangle","Container","$type","Graphics","Button","$utils","__extends","Object","_this","_makeThumb","_makeButton","_settings","themeTags","mergeTags","orientation","background","new","_root","children","push","get","icon","animation","_disposers","events","on","setPrivateRaw","_thumbBusy","_addOrientationClass","_super","_afterNew","call","startGrip","endGrip","thumb","event","point","_display","toLocal","w","width","h","height","newMiddle","y","x","newCoordinate","key","duration","_handleAnimation","animate","to","easing","set","_startDown","_gripDown","_endDown","_thumbDown","undefined","_updateThumb","_updateGripsByThumb","adapters","add","value","Math","max","min","Number","_value","_updateChildren","isDirty","_sizeDirty","updateGrips","_changed","eventType","isEnabled","dispatch","type","target","start","end","grip","valueFunction","getPrivate","from","round","fromValue","toValue","_t","x0","x1","y0","y1","isNumber","isDragging","thumbSize","classNames","concat","Scrollbar","className"],"sourceRoot":"","sources":["../../../../../src/.internal/core/render/Scrollbar.ts"],"sourcesContent":["import { RoundedRectangle } from \"../render/RoundedRectangle\";\nimport { Container, IContainerPrivate, IContainerSettings, IContainerEvents } from \"./Container\";\nimport * as $type from \"../util/Type\";\nimport { Graphics } from \"./Graphics\";\nimport { Button } from \"./Button\";\nimport type { Time } from \"../util/Animation\";\nimport * as $utils from \"../util/Utils\";\nimport type { Animation } from \"../util/Entity\";\n\nexport interface IScrollbarSettings extends IContainerSettings {\n\n\t/**\n\t * Orientation of the scrollbar.\n\t */\n\torientation: \"horizontal\" | \"vertical\";\n\n\t/**\n\t * Relative start of the selected range, with 0 meaning beginning, and 1 the\n\t * end.\n\t */\n\tstart?: number;\n\n\t/**\n\t * Relative end of the selected range, with 0 meaning beginning, and 1 the\n\t * end.\n\t */\n\tend?: number;\n\n\t/**\n\t * Number of milliseconds to play scroll animations for.\n\t */\n\tanimationDuration?: number;\n\n\t/**\n\t * Easing function to use for animations.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/concepts/animations/#Easing_functions} for more info\n\t */\n\tanimationEasing?: (t: Time) => Time;\n\n}\n\nexport interface IScrollbarPrivate extends IContainerPrivate {\n\n\t/**\n\t * @ignore\n\t */\n\tisBusy?: boolean;\n\n\t/**\n\t * @ignore\n\t */\n\tpositionTextFunction?: (position: number) => string;\n\n}\n\nexport interface IScrollbarEvents extends IContainerEvents {\n\n\t/**\n\t * Invoked when range of the selection changes.\n\t */\n\trangechanged: { start: number, end: number, grip?: \"start\" | \"end\" };\n\n}\n\n/**\n * A control that allows zooming chart's axes, or other uses requiring range\n * selection.\n *\n * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/scrollbars/} for more info\n */\nexport class Scrollbar extends Container {\n\n\tpublic _addOrientationClass() {\n\t\tthis._settings.themeTags = $utils.mergeTags(this._settings.themeTags, [\"scrollbar\", this._settings.orientation]);\n\t\tif (!this._settings.background) {\n\t\t\tthis._settings.background = RoundedRectangle.new(this._root, {\n\t\t\t\tthemeTags: $utils.mergeTags(this._settings.themeTags, [\"main\", \"background\"])\n\t\t\t});\n\t\t}\n\t}\n\n\tdeclare public _settings: IScrollbarSettings;\n\tdeclare public _privateSettings: IScrollbarPrivate;\n\tdeclare public _events: IScrollbarEvents;\n\n\tpublic static className: string = \"Scrollbar\";\n\tpublic static classNames: Array<string> = Container.classNames.concat([Scrollbar.className]);\n\n\t/**\n\t * A thumb elment - a draggable square between the grips, used for panning\n\t * the selection.\n\t */\n\tpublic thumb: RoundedRectangle = this._makeThumb();\n\n\t/**\n\t * Start grip button.\n\t */\n\tpublic startGrip: Button = this._makeButton();\n\n\t/**\n\t * End grip button.\n\t */\n\tpublic endGrip: Button = this._makeButton();\n\n\tprotected _thumbBusy: boolean = false;\n\n\tprotected _startDown: boolean = false;\n\n\tprotected _endDown: boolean = false;\n\n\tprotected _thumbDown: boolean = false;\n\n\tprotected _gripDown?: \"start\" | \"end\";\n\n\tprotected _makeButton(): Button {\n\t\treturn this.children.push(Button.new(this._root, {\n\t\t\tthemeTags: [\"resize\", \"button\", this.get(\"orientation\")], icon: Graphics.new(this._root, {\n\t\t\t\tthemeTags: [\"icon\"]\n\t\t\t})\n\t\t}));\n\t}\n\n\tprotected _makeThumb(): RoundedRectangle {\n\t\treturn this.children.push(RoundedRectangle.new(this._root, {\n\t\t\tthemeTags: [\"thumb\", this.get(\"orientation\")]\n\t\t}));\n\t}\n\n\tprotected _handleAnimation(animation: Animation<any>) {\n\t\tif (animation) {\n\t\t\tthis._disposers.push(\n\t\t\t\tanimation.events.on(\"stopped\", () => {\n\t\t\t\t\tthis.setPrivateRaw(\"isBusy\", false);\n\t\t\t\t\tthis._thumbBusy = false;\n\t\t\t\t})\n\t\t\t)\n\t\t}\n\t}\n\n\tprotected _afterNew() {\n\t\tthis._addOrientationClass();\n\t\tsuper._afterNew();\n\n\t\tconst startGrip = this.startGrip;\n\t\tconst endGrip = this.endGrip;\n\t\tconst thumb = this.thumb;\n\t\tconst background = this.get(\"background\");\n\n\t\tif (background) {\n\t\t\tthis._disposers.push(\n\t\t\t\tbackground.events.on(\"click\", (event) => {\n\t\t\t\t\tthis.setPrivateRaw(\"isBusy\", true);\n\t\t\t\t\tconst point = this._display.toLocal(event.point);\n\n\t\t\t\t\tconst w = this.width();\n\t\t\t\t\tconst h = this.height();\n\n\t\t\t\t\tconst orientation = this.get(\"orientation\");\n\n\t\t\t\t\tlet newMiddle: number;\n\n\t\t\t\t\tif (orientation == \"vertical\") {\n\t\t\t\t\t\tnewMiddle = (point.y - thumb.height() / 2) / h;\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tnewMiddle = (point.x - thumb.width() / 2) / w;\n\t\t\t\t\t}\n\n\t\t\t\t\tlet newCoordinate: number;\n\t\t\t\t\tlet key: \"x\" | \"y\";\n\n\t\t\t\t\tif (orientation == \"vertical\") {\n\t\t\t\t\t\tnewCoordinate = newMiddle * h;\n\t\t\t\t\t\tkey = \"y\";\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tnewCoordinate = newMiddle * w;\n\t\t\t\t\t\tkey = \"x\";\n\t\t\t\t\t}\n\n\n\t\t\t\t\tconst duration = this.get(\"animationDuration\", 0);\n\t\t\t\t\tif (duration > 0) {\n\t\t\t\t\t\tthis._thumbBusy = true;\n\t\t\t\t\t\tthis._handleAnimation(this.thumb.animate({ key: key, to: newCoordinate, duration: duration, easing: this.get(\"animationEasing\") }));\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tthis.thumb.set(key, newCoordinate);\n\t\t\t\t\t\tthis._root.events.on(\"frameended\", () => {\n\t\t\t\t\t\t\tthis.setPrivateRaw(\"isBusy\", false);\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t)\n\t\t}\n\n\t\tthis._disposers.push(thumb.events.on(\"dblclick\", () => {\n\t\t\tconst duration = this.get(\"animationDuration\", 0);\n\t\t\tconst easing = this.get(\"animationEasing\");\n\n\t\t\tthis.animate({ key: \"start\", to: 0, duration: duration, easing: easing });\n\t\t\tthis.animate({ key: \"end\", to: 1, duration: duration, easing: easing });\n\t\t}));\n\n\t\tthis._disposers.push(startGrip.events.on(\"pointerdown\", () => {\n\t\t\tthis.setPrivateRaw(\"isBusy\", true);\n\t\t\tthis._startDown = true;\n\t\t\tthis._gripDown = \"start\";\n\t\t}))\n\n\t\tthis._disposers.push(endGrip.events.on(\"pointerdown\", () => {\n\t\t\tthis.setPrivateRaw(\"isBusy\", true);\n\t\t\tthis._endDown = true;\n\t\t\tthis._gripDown = \"end\";\n\t\t}))\n\n\t\tthis._disposers.push(thumb.events.on(\"pointerdown\", () => {\n\t\t\tthis.setPrivateRaw(\"isBusy\", true);\n\t\t\tthis._thumbDown = true;\n\t\t\tthis._gripDown = undefined;\n\t\t}))\n\n\t\tthis._disposers.push(startGrip.events.on(\"globalpointerup\", () => {\n\t\t\tif (this._startDown) {\n\t\t\t\tthis.setPrivateRaw(\"isBusy\", false);\n\t\t\t}\n\t\t\tthis._startDown = false;\n\t\t}))\n\n\t\tthis._disposers.push(endGrip.events.on(\"globalpointerup\", () => {\n\t\t\tif (this._endDown) {\n\t\t\t\tthis.setPrivateRaw(\"isBusy\", false);\n\t\t\t}\n\t\t\tthis._endDown = false;\n\t\t}))\n\n\t\tthis._disposers.push(thumb.events.on(\"globalpointerup\", () => {\n\t\t\tif (this._thumbDown) {\n\t\t\t\tthis.setPrivateRaw(\"isBusy\", false);\n\t\t\t}\n\t\t\tthis._thumbDown = false;\n\t\t}))\n\n\t\tthis._disposers.push(startGrip.on(\"x\", () => {\n\t\t\tthis._updateThumb();\n\t\t}));\n\n\t\tthis._disposers.push(endGrip.on(\"x\", () => {\n\t\t\tthis._updateThumb();\n\t\t}));\n\n\t\tthis._disposers.push(startGrip.on(\"y\", () => {\n\t\t\tthis._updateThumb();\n\t\t}));\n\n\t\tthis._disposers.push(endGrip.on(\"y\", () => {\n\t\t\tthis._updateThumb();\n\t\t}));\n\n\t\tthis._disposers.push(thumb.events.on(\"positionchanged\", () => {\n\t\t\tthis._updateGripsByThumb();\n\t\t}));\n\n\t\tif (this.get(\"orientation\") == \"vertical\") {\n\t\t\tstartGrip.set(\"x\", 0);\n\t\t\tendGrip.set(\"x\", 0);\n\n\t\t\tthis._disposers.push(thumb.adapters.add(\"y\", (value) => {\n\t\t\t\treturn Math.max(Math.min(Number(value), this.height() - thumb.height()), 0);\n\t\t\t}))\n\n\t\t\tthis._disposers.push(thumb.adapters.add(\"x\", (_value) => {\n\t\t\t\treturn this.width() / 2;\n\t\t\t}))\n\n\t\t\tthis._disposers.push(startGrip.adapters.add(\"x\", (_value) => {\n\t\t\t\treturn this.width() / 2;\n\t\t\t}))\n\n\t\t\tthis._disposers.push(endGrip.adapters.add(\"x\", (_value) => {\n\t\t\t\treturn this.width() / 2;\n\t\t\t}))\n\n\t\t\tthis._disposers.push(startGrip.adapters.add(\"y\", (value) => {\n\t\t\t\treturn Math.max(Math.min(Number(value), this.height()), 0);\n\t\t\t}))\n\n\t\t\tthis._disposers.push(endGrip.adapters.add(\"y\", (value) => {\n\t\t\t\treturn Math.max(Math.min(Number(value), this.height()), 0);\n\t\t\t}))\n\t\t}\n\t\telse {\n\t\t\tstartGrip.set(\"y\", 0);\n\t\t\tendGrip.set(\"y\", 0);\n\n\t\t\tthis._disposers.push(thumb.adapters.add(\"x\", (value) => {\n\t\t\t\treturn Math.max(Math.min(Number(value), this.width() - thumb.width()), 0);\n\t\t\t}))\n\n\t\t\tthis._disposers.push(thumb.adapters.add(\"y\", (_value) => {\n\t\t\t\treturn this.height() / 2;\n\t\t\t}))\n\n\t\t\tthis._disposers.push(startGrip.adapters.add(\"y\", (_value) => {\n\t\t\t\treturn this.height() / 2;\n\t\t\t}))\n\n\t\t\tthis._disposers.push(endGrip.adapters.add(\"y\", (_value) => {\n\t\t\t\treturn this.height() / 2;\n\t\t\t}))\n\n\t\t\tthis._disposers.push(startGrip.adapters.add(\"x\", (value) => {\n\t\t\t\treturn Math.max(Math.min(Number(value), this.width()), 0);\n\t\t\t}))\n\n\t\t\tthis._disposers.push(endGrip.adapters.add(\"x\", (value) => {\n\t\t\t\treturn Math.max(Math.min(Number(value), this.width()), 0);\n\t\t\t}))\n\t\t}\n\t}\n\n\tpublic _updateChildren() {\n\t\tsuper._updateChildren();\n\n\t\tif (this.isDirty(\"end\") || this.isDirty(\"start\") || this._sizeDirty) {\n\t\t\tthis.updateGrips();\n\t\t}\n\t}\n\n\tpublic _changed() {\n\t\tsuper._changed();\n\t\tif (this.isDirty(\"start\") || this.isDirty(\"end\")) {\n\t\t\tconst eventType = \"rangechanged\";\n\t\t\tif (this.events.isEnabled(eventType)) {\n\t\t\t\tthis.events.dispatch(eventType, { type: eventType, target: this, start: this.get(\"start\", 0), end: this.get(\"end\", 1), grip: this._gripDown });\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * @ignore\n\t */\n\tpublic updateGrips() {\n\t\tconst startGrip = this.startGrip;\n\t\tconst endGrip = this.endGrip;\n\n\t\tconst orientation = this.get(\"orientation\");\n\t\tconst height = this.height();\n\t\tconst width = this.width();\n\n\t\tif (orientation == \"vertical\") {\n\t\t\tstartGrip.set(\"y\", height * this.get(\"start\", 0));\n\t\t\tendGrip.set(\"y\", height * this.get(\"end\", 1));\n\t\t}\n\t\telse {\n\t\t\tstartGrip.set(\"x\", width * this.get(\"start\", 0));\n\t\t\tendGrip.set(\"x\", width * this.get(\"end\", 1));\n\t\t}\n\n\t\tconst valueFunction = this.getPrivate(\"positionTextFunction\");\n\t\tconst from = Math.round(this.get(\"start\", 0) * 100);\n\t\tconst to = Math.round(this.get(\"end\", 0) * 100);\n\t\tlet fromValue: string;\n\t\tlet toValue: string;\n\t\tif (valueFunction) {\n\t\t\tfromValue = valueFunction.call(this, this.get(\"start\", 0));\n\t\t\ttoValue = valueFunction.call(this, this.get(\"end\", 0));\n\t\t}\n\t\telse {\n\t\t\tfromValue = from + \"%\";\n\t\t\ttoValue = to + \"%\";\n\t\t}\n\n\t\tstartGrip.set(\"ariaLabel\", this._t(\"From %1\", undefined, fromValue));\n\t\tstartGrip.set(\"ariaValueNow\", \"\" + from);\n\t\tstartGrip.set(\"ariaValueText\", from + \"%\");\n\n\t\tstartGrip.set(\"ariaValueMin\", \"0\");\n\t\tstartGrip.set(\"ariaValueMax\", \"100\");\n\n\t\tendGrip.set(\"ariaLabel\", this._t(\"To %1\", undefined, toValue));\n\t\tendGrip.set(\"ariaValueNow\", \"\" + to);\n\t\tendGrip.set(\"ariaValueText\", to + \"%\");\n\n\t\tendGrip.set(\"ariaValueMin\", \"0\");\n\t\tendGrip.set(\"ariaValueMax\", \"100\");\n\t}\n\n\tprotected _updateThumb() {\n\t\tconst thumb = this.thumb;\n\t\tconst startGrip = this.startGrip;\n\t\tconst endGrip = this.endGrip;\n\n\t\tconst height = this.height();\n\t\tconst width = this.width();\n\n\t\tlet x0 = startGrip.x();\n\t\tlet x1 = endGrip.x();\n\n\t\tlet y0 = startGrip.y();\n\t\tlet y1 = endGrip.y();\n\n\t\tlet start: number = 0;\n\t\tlet end: number = 1;\n\n\t\tif (this.get(\"orientation\") == \"vertical\") {\n\t\t\tif ($type.isNumber(y0) && $type.isNumber(y1)) {\n\t\t\t\tif (!this._thumbBusy && !thumb.isDragging()) {\n\t\t\t\t\tthumb.set(\"height\", y1 - y0);\n\t\t\t\t\tthumb.set(\"y\", y0);\n\t\t\t\t}\n\t\t\t\tstart = y0 / height;\n\t\t\t\tend = y1 / height;\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\tif ($type.isNumber(x0) && $type.isNumber(x1)) {\n\t\t\t\tif (!this._thumbBusy && !thumb.isDragging()) {\n\t\t\t\t\tthumb.set(\"width\", x1 - x0);\n\t\t\t\t\tthumb.set(\"x\", x0);\n\t\t\t\t}\n\t\t\t\tstart = x0 / width;\n\t\t\t\tend = x1 / width;\n\t\t\t}\n\t\t}\n\n\t\tif (this.getPrivate(\"isBusy\") && (this.get(\"start\") != start || this.get(\"end\") != end)) {\n\t\t\tthis.set(\"start\", start);\n\t\t\tthis.set(\"end\", end);\n\t\t}\n\n\t\tconst valueFunction = this.getPrivate(\"positionTextFunction\");\n\t\tconst from = Math.round(this.get(\"start\", 0) * 100);\n\t\tconst to = Math.round(this.get(\"end\", 0) * 100);\n\t\tlet fromValue: string;\n\t\tlet toValue: string;\n\t\tif (valueFunction) {\n\t\t\tfromValue = valueFunction.call(this, this.get(\"start\", 0));\n\t\t\ttoValue = valueFunction.call(this, this.get(\"end\", 0));\n\t\t}\n\t\telse {\n\t\t\tfromValue = from + \"%\";\n\t\t\ttoValue = to + \"%\";\n\t\t}\n\n\t\tthumb.set(\"ariaLabel\", this._t(\"From %1 to %2\", undefined, fromValue, toValue));\n\t\tthumb.set(\"ariaValueNow\", \"\" + from);\n\t\tthumb.set(\"ariaValueText\", from + \"%\");\n\t}\n\n\n\tprotected _updateGripsByThumb() {\n\n\t\tconst thumb = this.thumb;\n\t\tconst startGrip = this.startGrip;\n\t\tconst endGrip = this.endGrip;\n\n\t\tif (this.get(\"orientation\") == \"vertical\") {\n\t\t\tconst thumbSize = thumb.height();\n\t\t\tstartGrip.set(\"y\", thumb.y());\n\t\t\tendGrip.set(\"y\", thumb.y() + thumbSize);\n\t\t}\n\t\telse {\n\t\t\tconst thumbSize = thumb.width();\n\t\t\tstartGrip.set(\"x\", thumb.x());\n\t\t\tendGrip.set(\"x\", thumb.x() + thumbSize);\n\t\t}\n\t}\n}\n"]},"metadata":{},"sourceType":"module"}