{"ast":null,"code":"/**\r\n * @ignore\r\n */\nvar MonotoneXTension =\n/** @class */\nfunction () {\n  function MonotoneXTension(context, tension) {\n    Object.defineProperty(this, \"_line\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: 0\n    });\n    Object.defineProperty(this, \"_point\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: 0\n    });\n    Object.defineProperty(this, \"_context\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: void 0\n    });\n    Object.defineProperty(this, \"_x0\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: 0\n    });\n    Object.defineProperty(this, \"_x1\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: 0\n    });\n    Object.defineProperty(this, \"_y0\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: 0\n    });\n    Object.defineProperty(this, \"_y1\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: 0\n    });\n    Object.defineProperty(this, \"_t0\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: 0\n    });\n    Object.defineProperty(this, \"_tension\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: 0\n    });\n    this._context = context;\n    this._tension = tension;\n  }\n\n  Object.defineProperty(MonotoneXTension.prototype, \"areaStart\", {\n    enumerable: false,\n    configurable: true,\n    writable: true,\n    value: function () {\n      this._line = 0;\n    }\n  });\n  Object.defineProperty(MonotoneXTension.prototype, \"areaEnd\", {\n    enumerable: false,\n    configurable: true,\n    writable: true,\n    value: function () {\n      this._line = NaN;\n    }\n  });\n  Object.defineProperty(MonotoneXTension.prototype, \"lineStart\", {\n    enumerable: false,\n    configurable: true,\n    writable: true,\n    value: function () {\n      this._x0 = this._x1 = this._y0 = this._y1 = this._t0 = NaN;\n      this._point = 0;\n    }\n  });\n  Object.defineProperty(MonotoneXTension.prototype, \"lineEnd\", {\n    enumerable: false,\n    configurable: true,\n    writable: true,\n    value: function () {\n      switch (this._point) {\n        case 2:\n          this._context.lineTo(this._x1, this._y1);\n\n          break;\n\n        case 3:\n          point(this, this._t0, slope2(this, this._t0));\n          break;\n      }\n\n      if (this._line || this._line !== 0 && this._point === 1) this._context.closePath();\n      this._line = 1 - this._line;\n    }\n  });\n  Object.defineProperty(MonotoneXTension.prototype, \"point\", {\n    enumerable: false,\n    configurable: true,\n    writable: true,\n    value: function (x, y) {\n      var t1 = NaN;\n      x = +x, y = +y;\n      if (x === this._x1 && y === this._y1) return; // Ignore coincident points.\n\n      switch (this._point) {\n        case 0:\n          this._point = 1;\n          this._line ? this._context.lineTo(x, y) : this._context.moveTo(x, y);\n          break;\n\n        case 1:\n          this._point = 2;\n          break;\n\n        case 2:\n          this._point = 3;\n          point(this, slope2(this, t1 = slope3(this, x, y)), t1);\n          break;\n\n        default:\n          point(this, this._t0, t1 = slope3(this, x, y));\n          break;\n      }\n\n      this._x0 = this._x1, this._x1 = x;\n      this._y0 = this._y1, this._y1 = y;\n      this._t0 = t1;\n    }\n  });\n  return MonotoneXTension;\n}();\n\nexport { MonotoneXTension };\n/**\r\n * @ignore\r\n */\n\nexport function curveMonotoneXTension(tension) {\n  function monotoneXTension(context) {\n    return new MonotoneXTension(context, tension);\n  }\n\n  return monotoneXTension;\n}\n/**\r\n * @ignore\r\n */\n\nfunction sign(x) {\n  return x < 0 ? -1 : 1;\n}\n/**\r\n * @ignore\r\n */\n\n\nfunction slope3(that, x2, y2) {\n  var h0 = that._x1 - that._x0;\n  var h1 = x2 - that._x1;\n  var s0 = (that._y1 - that._y0) / (h0 || h1 < 0 && -0);\n  var s1 = (y2 - that._y1) / (h1 || h0 < 0 && -0);\n  var p = (s0 * h1 + s1 * h0) / (h0 + h1);\n  return (sign(s0) + sign(s1)) * Math.min(Math.abs(s0), Math.abs(s1), 0.5 * Math.abs(p)) || 0;\n}\n/**\r\n * @ignore\r\n */\n\n\nfunction slope2(that, t) {\n  var h = that._x1 - that._x0;\n  return h ? (3 * (that._y1 - that._y0) / h - t) / 2 : t;\n}\n/**\r\n * @ignore\r\n */\n\n\nfunction point(that, t0, t1) {\n  var x0 = that._x0,\n      y0 = that._y0,\n      x1 = that._x1,\n      y1 = that._y1,\n      dx = (x1 - x0) / 1.5 * (1 - that._tension);\n\n  that._context.bezierCurveTo(x0 + dx, y0 + dx * t0, x1 - dx, y1 - dx * t1, x1, y1);\n}","map":{"version":3,"mappings":"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","names":["context","tension","Object","_context","_tension","_line","NaN","_x0","_x1","_y0","_y1","_t0","_point","lineTo","point","slope2","closePath","x","y","t1","moveTo","slope3","curveMonotoneXTension","monotoneXTension","MonotoneXTension","sign","that","x2","y2","h0","h1","s0","s1","p","Math","min","abs","t","h","t0","x0","y0","x1","y1","dx","bezierCurveTo"],"sourceRoot":"","sources":["../../../../../src/.internal/core/render/MonotoneXTension.ts"],"sourcesContent":["/**\n * @ignore\n */\nexport class MonotoneXTension {\n\n  constructor(context: CanvasRenderingContext2D, tension: number) {\n    this._context = context;\n    this._tension = tension;\n  }\n\n  public _line = 0;\n  public _point = 0;\n  public _context: any;\n  public _x0 = 0;\n  public _x1 = 0;\n  public _y0 = 0;\n  public _y1 = 0;\n  public _t0 = 0;\n\n  public _tension: number = 0;\n\n  public areaStart() {\n    this._line = 0;\n  }\n\n  public areaEnd() {\n    this._line = NaN;\n  }\n\n  public lineStart() {\n    this._x0 = this._x1 =\n      this._y0 = this._y1 =\n      this._t0 = NaN;\n    this._point = 0;\n  }\n\n  public lineEnd() {\n    switch (this._point) {\n      case 2: this._context.lineTo(this._x1, this._y1); break;\n      case 3: point(this, this._t0, slope2(this, this._t0)); break;\n    }\n    if (this._line || (this._line !== 0 && this._point === 1)) this._context.closePath();\n    this._line = 1 - this._line;\n  }\n\n  public point(x: number, y: number) {\n    let t1 = NaN;\n\n    x = +x, y = +y;\n    if (x === this._x1 && y === this._y1) return; // Ignore coincident points.\n    switch (this._point) {\n      case 0: this._point = 1; this._line ? this._context.lineTo(x, y) : this._context.moveTo(x, y); break;\n      case 1: this._point = 2; break;\n      case 2: this._point = 3; point(this, slope2(this, t1 = slope3(this, x, y)), t1); break;\n      default: point(this, this._t0, t1 = slope3(this, x, y)); break;\n    }\n\n    this._x0 = this._x1, this._x1 = x;\n    this._y0 = this._y1, this._y1 = y;\n    this._t0 = t1;\n  }\n}\n\n/**\n * @ignore\n */\nexport function curveMonotoneXTension(tension: number) {\n\n  function monotoneXTension(context: any) {\n    return new MonotoneXTension(context, tension);\n  }\n\n  return monotoneXTension;\n}\n\n/**\n * @ignore\n */\nfunction sign(x: number) {\n  return x < 0 ? -1 : 1;\n}\n\n/**\n * @ignore\n */\nfunction slope3(that: MonotoneXTension, x2: number, y2: number) {\n  let h0 = (that._x1 - that._x0) as any;\n  let h1 = (x2 - that._x1) as any;\n  let s0 = (that._y1 - that._y0) / (h0 || h1 < 0 && -0);\n  let s1 = (y2 - that._y1) / (h1 || h0 < 0 && -0);\n  let p = (s0 * h1 + s1 * h0) / (h0 + h1);\n  return (sign(s0) + sign(s1)) * Math.min(Math.abs(s0), Math.abs(s1), 0.5 * Math.abs(p)) || 0;\n}\n\n/**\n * @ignore\n */\nfunction slope2(that: MonotoneXTension, t: number) {\n  let h = that._x1 - that._x0;\n  return h ? (3 * (that._y1 - that._y0) / h - t) / 2 : t;\n}\n\n/**\n * @ignore\n */\nfunction point(that: MonotoneXTension, t0: number, t1: number) {\n  let x0 = that._x0,\n    y0 = that._y0,\n    x1 = that._x1,\n    y1 = that._y1,\n    dx = (x1 - x0) / 1.5 * (1 - that._tension);\n  that._context.bezierCurveTo(x0 + dx, y0 + dx * t0, x1 - dx, y1 - dx * t1, x1, y1);\n}"]},"metadata":{},"sourceType":"module"}